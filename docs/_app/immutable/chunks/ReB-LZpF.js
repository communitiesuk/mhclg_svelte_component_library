const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CR76zolB.js","./CWj6FrbW.js","./DAeYpASc.js","./DIeogL5L.js","./BAP9DKun.js","./CDnlRnBP.js","./FLOBqqeq.js","./oN6NPT6s.js","./BRrZqxBe.js","./DtT6GxuX.js","./CJp10wTC.js","./BYRFjNIU.js","./D-UoBf0D.js","./69_IOA4Y.js","./B1PqsPS-.js","./DFpCoyn2.js","./mMANI47B.js","./CLgDgyuC.js","./Z2PZBtPJ.js","./DLSzT-Iv.js","../assets/BaseNameAndStatus.qS4sRJj_.css","./D9YvIc1u.js","./B0q4GGo4.js","./5CLvz9iT.js","./BsmZ85P6.js","./CI1v4P9X.js","./CHGw20dn.js","./ip80KjXp.js","./C1FmrZbK.js","../assets/trackVisibleParameters.BLq838N2.css","./CMjediXt.js","./CgDP17d5.js","./D7Z_5HJW.js","./CCtWB3O0.js","./XE8Cmq_2.js","../assets/Button.DsESe_J9.css","../assets/TabsWrapper.BOkE23vb.css","./BN2H7N1i.js","./BKeHLC57.js","./5HYu0RTI.js","./2OmiWHu2.js","../assets/MapWrapper.BA1OL-2v.css"])))=>i.map(i=>d[i]);
import{_ as E}from"./C1FmrZbK.js";import"./CWj6FrbW.js";import{o as Se}from"./mMANI47B.js";import{p as Ae,F as y,G as W,c as Ce,a as xe,I as L,r as ke,J as i}from"./DAeYpASc.js";import{f as Le,a as Oe}from"./BAP9DKun.js";import{c as qe,e as Te}from"./BYRFjNIU.js";import{b as Fe}from"./CLgDgyuC.js";import{p as r,s as Ne,r as Ie}from"./CDnlRnBP.js";import{S as Pe,c as Ve}from"./WXW80ToY.js";const Be="data:image/svg+xml,%3csvg%20width='20'%20height='40'%20viewBox='0%20-10%2020%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.902%2014.4681C12.3859%2014.4681%2015.2102%2011.6438%2015.2102%208.15981C15.2102%204.67586%2012.3859%201.85156%208.902%201.85156C5.41805%201.85156%202.59375%204.67586%202.59375%208.15981C2.59375%2011.6438%205.41805%2014.4681%208.902%2014.4681Z'%20stroke='%23505a5f'%20stroke-width='2'/%3e%3cpath%20d='M13.2344%2012.8584L19.5904%2019.2144'%20stroke='%23505a5f'%20stroke-width='2'/%3e%3c/svg%3e";var ze=Le("<div><!></div>");function Je(Q,t){Ae(t,!0);let O=g=>g,v=r(t,"options",3,void 0),l=r(t,"source_url",3,void 0),S=r(t,"source_key",3,void 0),m=r(t,"source_property",3,void 0),G=r(t,"pathBasedApi",3,!1),x=r(t,"groupKey",3,void 0),q=r(t,"sourceSelector",3,void 0),N=r(t,"size",3,""),I=r(t,"on_govuk_blue",3,!1),P=r(t,"homepage",3,!1),J=r(t,"outerClasses",3,""),Z=r(t,"outerDataAttributes",19,()=>({})),M=r(t,"name",3,"q"),X=r(t,"label_text",3,"Search"),Y=r(t,"button_text",3,"Search"),T=r(t,"minLength",3,3),$=r(t,"confirmOnBlur",3,!1),ee=r(t,"showNoOptionsFound",3,!0),te=r(t,"defaultValue",3,""),oe=r(t,"placeholder",3,""),re=r(t,"required",3,!1),se=r(t,"tNoResults",3,()=>"No results found"),ae=r(t,"tAssistiveHint",3,()=>"When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures."),ne=r(t,"menuAttributes",19,()=>({})),ie=r(t,"menuClasses",3,""),ue=r(t,"hint",3,void 0),ce=r(t,"selectedValue",15),le=Ie(t,["$$slots","$$events","$$legacy","options","source_url","source_key","source_property","pathBasedApi","groupKey","sourceSelector","size","on_govuk_blue","homepage","outerClasses","outerDataAttributes","id","name","label_text","button_text","minLength","confirmOnBlur","showNoOptionsFound","defaultValue","placeholder","required","tNoResults","tAssistiveHint","menuAttributes","menuClasses","hint","selectedValue"]),a,k=null,h=L("auto"),f=L(void 0),p=L(void 0),_=L(void 0);const de=W(()=>Te("gem-c-search-with-autocomplete",N()==="large"&&"gem-c-search-with-autocomplete--large",(I()||P())&&"gem-c-search-with-autocomplete--on-govuk-blue",J())),me=W(()=>({...le,label_text:X(),button_text:Y(),id:t.id,name:M(),inline_label:!1,size:N(),on_govuk_blue:I(),homepage:P(),hint:ue(),value:void 0}));function V(g){return`Enter ${g} or more characters for suggestions`}Se(async()=>{{O=(await E(async()=>{const{default:e}=await import("./CR76zolB.js").then(s=>s.p);return{default:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url)).default.sanitize;const fe=(await E(async()=>{const{default:e}=await import("./BN2H7N1i.js").then(s=>s.a);return{default:e}},__vite__mapDeps([37,38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,39,40,41]),import.meta.url)).default,F=a==null?void 0:a.querySelector(".js-search-input-wrapper"),b=a==null?void 0:a.querySelector('input[type="search"]');if(!F||!b){console.error("SearchAutocomplete: Could not find target elements for initialisation.");return}const B=(e,s)=>{if(i(h,"api"),i(f,l()),i(p,S()),i(_,m()),!l()||!S()){console.error("SearchAutocomplete: source_url and source_key are required for API mode."),s([]);return}let n;if(G()){const o=l().endsWith("/")?l().slice(0,-1):l();n=new URL(`${o}/${encodeURIComponent(e)}`)}else n=new URL(l()),n.searchParams.set("q",e);fetch(n,{headers:{Accept:"application/json"}}).then(o=>{if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}).then(o=>{const c=o[S()]||[];if(!Array.isArray(c)){console.error("SearchAutocomplete: Source key did not return an array."),s([]);return}s(c.map(u=>{if(typeof u=="string")return u;if(u&&typeof u=="object"){if(m()&&m()in u)return String(u[m()]);if("label"in u)return String(u.label);if("postcode"in u)return String(u.postcode);console.warn("SearchAutocomplete: Could not find 'label', 'postcode', or specified 'source_property' in object:",u)}return String(u??"")}))}).catch(o=>{console.error("SearchAutocomplete: Error fetching results:",o),s([])})},z=(e,s)=>{if(i(h,"options"),i(f,void 0),i(p,void 0),i(_,void 0),!v()){s([]);return}const n=e.toLowerCase(),o=v().filter(c=>(typeof c=="string"?c:c.label).toLowerCase().includes(n));s(o)},D=Array.isArray(v())&&v().length>0,U=D?z:B;q()?(i(h,"auto"),i(f,l()),i(p,S()),i(_,m())):D?(i(h,"options"),i(f,void 0),i(p,void 0),i(_,void 0)):(i(h,"api"),i(f,l()),i(p,S()),i(_,m()));const pe=(q()?(e,s)=>{const n=q()(e,v()||[]);n==="api"?B(e,s):n==="options"?z(e,s):U(e,s)}:null)||U,_e=e=>{var K;const s=typeof e=="string"?e:e.label,n=document.createElement("div");n.textContent=s;const o=O(n.innerHTML),c=a==null?void 0:a.querySelector(".gem-c-search-with-autocomplete__input"),u=((K=c==null?void 0:c.value)==null?void 0:K.toLowerCase())||"",C=u?o.toLowerCase().indexOf(u):-1;let R=o;if(u&&C!==-1){const we=o.slice(0,C),ye=o.slice(C,C+u.length),ve=o.slice(C+u.length);R=`${we}<mark class="gem-c-search-with-autocomplete__suggestion-highlight">${ye}</mark>${ve}`}const be=x()&&typeof e=="object"&&e[x()]?` <span class="gem-c-search-with-autocomplete__suggestion-group">${O(String(e[x()]))}</span>`:"";return`
          <div class="gem-c-search-with-autocomplete__option-wrapper">
            <span class="gem-c-search-with-autocomplete__suggestion-icon"></span>
            <span class="gem-c-search-with-autocomplete__suggestion-text">${R}${be}</span>
          </div>
        `},j=e=>e===void 0?"":typeof e=="string"?e:e.label;let w=!1;const ge=e=>{if(e===void 0||w)return;ce(typeof e=="string"?e:e.value);const s=k==null?void 0:k.inputElement,n=a==null?void 0:a.closest("form");!s||!n||(w=!0,s.value=j(e),s.dataset.autocompleteAccepted="true",n.requestSubmit?n.requestSubmit():n.submit(),setTimeout(()=>{w=!1},500))};k=fe({element:F,id:b.id,name:b.name,inputClasses:b.classList,source:pe,minLength:T(),confirmOnBlur:$(),showNoOptionsFound:ee(),defaultValue:te(),placeholder:oe(),required:re(),tNoResults:se(),tAssistiveHint:ae(),menuAttributes:ne(),menuClasses:ie(),tStatusQueryTooShort:V,displayMenu:"overlay",cssNamespace:"gem-c-search-with-autocomplete",onConfirm:ge,templates:{suggestion:_e,inputValue:j}});const d=a==null?void 0:a.querySelector(".gem-c-search-with-autocomplete__input");if(d){const e=a.querySelector(".gem-c-search-with-autocomplete__menu");d.addEventListener("input",()=>{var n;const s=d.value;if((n=e==null?void 0:e.querySelector(".gem-c-search-with-autocomplete__option--too-short"))==null||n.remove(),s.length<T()){d.setAttribute("aria-expanded","true"),e==null||e.classList.add("gem-c-search-with-autocomplete__menu--visible"),e==null||e.classList.remove("gem-c-search-with-autocomplete__menu--hidden");const o=document.createElement("li");o.className="gem-c-search-with-autocomplete__option gem-c-search-with-autocomplete__option--too-short",o.setAttribute("role","option"),o.setAttribute("aria-disabled","true"),o.textContent=V(T()),e==null||e.prepend(o)}}),d.setAttribute("type","search"),d.addEventListener("keydown",s=>{if(w)return;if(d.getAttribute("aria-expanded")==="true"&&s.key==="Enter"){const o=a==null?void 0:a.closest("form");o&&(w=!0,o.requestSubmit?o.requestSubmit():o.submit(),setTimeout(()=>{w=!1},500))}})}b&&b.remove();const H=F.querySelector("label");H&&H.remove()}});var A=ze();qe(A,()=>({class:y(de),"data-module":"gem-search-with-autocomplete","data-source-url":y(f),"data-source-key":y(p),"data-source-property":y(_),"data-group-key":x(),"data-current-source":y(h),...Z(),style:`--suggestion-icon: url("${Be}"); --cancel-icon: url("${Ve}")`}));var he=Ce(A);Pe(he,Ne(()=>y(me))),ke(A),Fe(A,g=>a=g,()=>a),Oe(Q,A),xe()}export{Je as S};
