import"./CWj6FrbW.js";import{o as Ce}from"./CUqUSu4U.js";import{p as xe,f as Me,a as je,aE as K,J as r,I as G,y as k,c as a,s as v,r as n,t as w,G as Se,D as Te,z as Le}from"./I52qY7cu.js";import{e as Q,d as Be,s as g}from"./5F35P8og.js";import{i as U}from"./HAye_oo1.js";import{c as He,a as m,f as y}from"./BBh-6AA0.js";import{s as Ue,a as N}from"./vwgBT8YE.js";import{p as i}from"./BHp14Q1u.js";import{b as ze}from"./DpRaexjQ.js";import"./D5I35bDD.js";function Ie(d,t=!1){if(t){d.preventDefault();return}sessionStorage.setItem("previousUrl",window.location.href)}function Ge(d="/cookies-page"){const f=new URL(window.location.href).search;return d+f}function Ne(d,t,f){if(t()){r(f,!1);return}localStorage.setItem("bannerHidden","true"),r(f,!1)}function Ye(d,t){t({ad_storage:"denied",analytics_storage:"granted",personalization_storage:"denied",functionality_storage:"denied",security_storage:"denied",accepted:!0})}function De(d,t){t({ad_storage:"denied",analytics_storage:"denied",personalization_storage:"denied",functionality_storage:"denied",security_storage:"denied",rejected:!0})}function X(d,t){return Ie(d,t())}var Ee=y('<a class="govuk-link"> </a>'),Je=y('<button type="button" class="govuk-button" data-module="govuk-button"> </button>'),Pe=y('<div class="govuk-cookie-banner__message govuk-width-container"><div class="govuk-grid-row"><div class="govuk-grid-column-two-thirds"><div class="govuk-cookie-banner__content"><p class="govuk-body"> <!> at any time.</p></div></div></div> <div class="govuk-button-group"><!></div></div>'),Oe=y('<div class="govuk-cookie-banner__message govuk-width-container"><div class="govuk-grid-row"><div class="govuk-grid-column-two-thirds"><h2 class="govuk-cookie-banner__heading govuk-heading-m"> </h2> <div class="govuk-cookie-banner__content"><p class="govuk-body"> </p> <p class="govuk-body"> </p></div></div></div> <div class="govuk-button-group"><button type="button" class="govuk-button" data-module="govuk-button"> </button> <button type="button" class="govuk-button" data-module="govuk-button"> </button> <a class="govuk-link"> </a></div></div>'),Re=y('<div data-nosnippet="" role="region"><!> <!> <!></div>');function et(d,t){xe(t,!0);const f=e=>{var o=Ee();o.__click=[X,c];var u=a(o,!0);n(o),w(()=>{N(o,"href",ze+k(O)),g(u,se())}),m(e,o)},Z=e=>{var o=Je();o.__click=[Ne,c,C];var u=a(o,!0);n(o),w(()=>g(u,de())),m(e,o)},Y=(e,o=Te)=>{var u=Pe(),b=a(u),p=a(b),j=a(p),S=a(j),T=a(S),s=v(T);f(s),Le(),n(S),n(j),n(p),n(b);var _=v(b,2),h=a(_);Z(h),n(_),n(u),w(()=>g(T,`${o()??""} `)),m(e,u)};let $=i(t,"heading",3,"Cookies on MHCLG Svelte Component Library"),ee=i(t,"essentialCookiesText",3,"We use some essential cookies to make this service work."),te=i(t,"additionalCookiesText",3,"We'd like to set additional cookies so we can remember your settings, understand how people use the service and make improvements."),oe=i(t,"acceptButtonText",3,"Accept additional cookies"),ae=i(t,"rejectButtonText",3,"Reject additional cookies"),ne=i(t,"viewCookiesText",3,"View cookies"),ie=i(t,"acceptedMessage",3,"You've accepted additional cookies. You can"),re=i(t,"rejectedMessage",3,"You've rejected additional cookies. You can"),se=i(t,"changeSettingsText",3,"change your cookie settings"),de=i(t,"hideMessageText",3,"Hide cookie message"),ce=i(t,"cookiesPageUrl",3,"/cookies-page"),ue=i(t,"ariaLabel",3,"Cookies on MHCLG Svelte Component Library"),le=i(t,"rebranded",3,!0),c=i(t,"demoMode",3,!1),C=G(!0),l=G("initial"),x=G(null);function ve(){typeof window<"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)})}function M(...e){window.gtag&&window.gtag(...e)}function D(){if(c())return null;try{const e=localStorage.getItem("consentMode");return e?JSON.parse(e):null}catch(e){return console.error("Error loading consent from localStorage:",e),null}}function E(e){if(!c())try{localStorage.setItem("consentMode",JSON.stringify(e))}catch(o){console.error("Error saving consent to localStorage:",o)}}function J(){return c()?!1:localStorage.getItem("bannerHidden")==="true"}function ge(){const e={ad_storage:"denied",analytics_storage:"denied",personalization_storage:"denied",functionality_storage:"denied",security_storage:"denied"};return c()||M("consent","default",e),E(e),e}function P(e){c()||M("consent","update",e),E(e),r(x,e,!0),e.accepted?r(l,"accepted"):e.rejected&&r(l,"rejected")}let O=Se(()=>Ge(ce()));Ce(()=>{if(ve(),J()){r(C,!1);return}const e=D();e?(r(x,e,!0),M("consent","update",e),e.accepted?r(l,"accepted"):e.rejected&&r(l,"rejected")):r(x,ge(),!0)});function R(){if(c())return;const e=D();if(J()){r(C,!1);return}e&&(r(x,e,!0),M("consent","update",e),e.accepted?r(l,"accepted"):e.rejected&&r(l,"rejected"))}function fe(e){c()||(e.key==="consentMode"||e.key==="bannerHidden")&&R()}var W=He();Q("storage",K,fe),Q("localStorageChange",K,R);var _e=Me(W);{var ke=e=>{var o=Re(),u=a(o);{var b=s=>{var _=Oe(),h=a(_),A=a(h),z=a(A),me=a(z,!0);n(z);var V=v(z,2),I=a(V),be=a(I,!0);n(I);var q=v(I,2),pe=a(q,!0);n(q),n(V),n(A),n(h);var F=v(h,2),L=a(F);L.__click=[Ye,P];var he=a(L,!0);n(L);var B=v(L,2);B.__click=[De,P];var we=a(B,!0);n(B);var H=v(B,2);H.__click=[X,c];var ye=a(H,!0);n(H),n(F),n(_),w(()=>{g(me,$()),g(be,ee()),g(pe,te()),g(he,oe()),g(we,ae()),N(H,"href",k(O)),g(ye,ne())}),m(s,_)};U(u,s=>{k(l)==="initial"&&s(b)})}var p=v(u,2);{var j=s=>{Y(s,ie)};U(p,s=>{k(l)==="accepted"&&s(j)})}var S=v(p,2);{var T=s=>{Y(s,re)};U(S,s=>{k(l)==="rejected"&&s(T)})}n(o),w(()=>{Ue(o,1,`govuk-cookie-banner ${le()?"govuk-template--rebranded":""}`,"svelte-cjzmt1"),N(o,"aria-label",ue())}),m(e,o)};U(_e,e=>{k(C)&&e(ke)})}m(d,W),je()}Be(["click"]);export{et as C,Ge as c,Ie as h};
