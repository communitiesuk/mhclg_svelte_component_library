import"./CWj6FrbW.js";import{p as me,I as le,ab as pe,u as oe,t as y,a as ke,s as K,c as k,J as se,F as e,G as o,r as m,f as A,C as g,N as te,av as ae}from"./DAeYpASc.js";import{d as xe,s as H}from"./oN6NPT6s.js";import{f as O,a as _,c as V,t as de}from"./BAP9DKun.js";import{i as E}from"./BRrZqxBe.js";import{e as ee,i as je}from"./DtT6GxuX.js";import{e as be}from"./Z2PZBtPJ.js";import{a as M,c as Se,s as n,d as ye}from"./BYRFjNIU.js";import{p as W}from"./CDnlRnBP.js";const Le=(q,x=g,F=g,z)=>{let P=te(()=>ae(z==null?void 0:z(),!1));var u=Ee(),X=k(u,!0);m(u),y(()=>{n(u,"id",x()),M(u,1,`gem-c-related-navigation__sub-heading ${e(P)?"gem-c-related-navigation__sub-heading--other":""}`,"svelte-1eujhij"),n(u,"data-track-count",e(P)?void 0:"sidebarRelatedItemSection"),H(X,F())}),_(q,u)};var Te=O('<li class="gem-c-related-navigation__link svelte-1eujhij"><a> </a></li>'),Oe=(q,x,F)=>{q.preventDefault(),x(F())},we=O('<li class="gem-c-related-navigation__link toggle-wrap svelte-1eujhij" data-module="ga4-event-tracker"><a class="gem-c-related-navigation__toggle svelte-1eujhij" role="button"> </a></li>'),Je=O("<a> </a> <!>",1),Ce=O('<li class="gem-c-related-navigation__link gem-c-related-navigation__link--truncated-links svelte-1eujhij"><span aria-live="polite" role="region"></span></li>'),Ee=O("<h3> </h3>"),Ne=O("<!> <!>",1),Re=O('<nav class="gem-c-related-navigation__nav-section svelte-1eujhij"><!> <ul class="gem-c-related-navigation__link-list svelte-1eujhij"><!> <!></ul></nav>'),De=O('<div data-module="ga4-link-tracker" role="complementary"><!> <!></div>');function Pe(q,x){me(x,!0);const F=(a,t=g,s=g,p=g,i=g,r,j=g)=>{let w=te(()=>ae(r==null?void 0:r(),!1));var c=Te();const d=o(()=>Y(t())),v=o(()=>e(d)?t().url:t().base_path),J=o(()=>t().locale),h=o(()=>ne()?void 0:JSON.stringify({event_name:"navigation",type:"related content",index_section:(j()+1).toString(),index_link:(s()+1).toString(),index_section_count:u().length.toString(),index_total:p().toString(),section:i(),...e(d)&&{external:"true"}}));var l=k(c),b=k(l,!0);m(l),m(c),y(()=>{n(l,"href",e(v)),M(l,1,`govuk-link govuk-link gem-c-related-navigation__section-link ${e(w)?"govuk-link gem-c-related-navigation__section-link--other":""}`,"svelte-1eujhij"),n(l,"target",e(d)?"_blank":void 0),n(l,"rel",e(d)?"noopener noreferrer external":void 0),n(l,"data-ga4-link",e(h)),n(l,"lang",e(J)),H(b,t().title)}),_(a,c)},z=(a,t=g,s=g,p=g)=>{var i=V();const r=o(()=>t().length-p());var j=A(i);{var w=c=>{var d=we(),v=k(d);n(v,"data-ga4-event",JSON.stringify({event_name:"select_content",type:"related content"})),n(v,"href","#"),v.__click=[Oe,ge,s];var J=k(v,!0);m(v),m(d),y(()=>{n(v,"data-controls",`toggle_${s()}`),n(v,"data-expanded",e(L)[s()]),n(v,"data-toggled-text",`Show ${e(r)??""} more`),n(v,"aria-controls",`toggle_${s()}`),n(v,"aria-expanded",e(L)[s()]),H(J,e(L)[s()]?"Show fewer":`Show ${e(r)} more`)}),_(c,d)};E(j,c=>{e(r)>0&&c(w)})}_(a,i)},P=(a,t=g,s=g,p=g,i,r=g,j=g)=>{let w=te(()=>ae(i==null?void 0:i(),!1));var c=V();const d=o(()=>t().slice(r()));var v=A(c);{var J=h=>{var l=Ce(),b=k(l);ee(b,23,()=>e(d),C=>Y(C)?C.url:C.base_path,(C,T,N)=>{var U=Je();const R=o(()=>Y(e(T))),f=o(()=>e(R)?e(T).url:e(T).base_path),D=o(()=>e(T).locale),G=o(()=>e(w)?"govuk-link govuk-link gem-c-related-navigation__section-link govuk-link gem-c-related-navigation__section-link--other-truncated":"govuk-link govuk-link gem-c-related-navigation__section-link gem-c-related-navigation__section-link--inline"),I=o(()=>ne()?void 0:JSON.stringify({event_name:"navigation",type:"related content",index_section:(j()+1).toString(),index_link:(r()+e(N)+1).toString(),index_section_count:u().length.toString(),index_total:t().length.toString(),section:p(),...e(R)&&{external:"true"}}));var S=A(U),ue=k(S,!0);m(S);var he=K(S,2);{var fe=$=>{var re=de();y(()=>H(re,e(N)===e(d).length-2?", and ":", ")),_($,re)};E(he,$=>{e(N)<e(d).length-1&&$(fe)})}y(()=>{n(S,"href",e(f)),M(S,1,ye(e(G)),"svelte-1eujhij"),n(S,"target",e(R)?"_blank":void 0),n(S,"rel",e(R)?"noopener noreferrer external":void 0),n(S,"data-ga4-link",e(I)),n(S,"lang",e(D)),H(ue,e(T).title)}),_(C,U)}),m(b),m(l),y(()=>{n(b,"id",`toggle_${s()}`),M(b,1,`gem-c-related-navigation__toggle-more ${e(L)[s()]?"":"js-hidden"}`,"svelte-1eujhij")}),_(h,l)};E(v,h=>{e(d).length>0&&h(J)})}_(a,c)};let u=W(x,"sections",19,()=>[]),X=W(x,"headingLevel",3,2),ve=W(x,"listTruncateThreshold",3,5),ne=W(x,"disableGa4",3,!1);function Y(a){return"url"in a}let L=le(pe({}));oe(()=>{const a={};for(const t of u())a[t.id]=!1;se(L,a,!0)});function ge(a){a in e(L)&&(e(L)[a]=!e(L)[a])}let Z=le(!1);oe(()=>{se(Z,!0)});const B=o(()=>u().find(a=>a.type==="main"));var Q=De(),ie=k(Q);{var _e=a=>{var t=V(),s=A(t);be(s,()=>`h${X()}`,!1,(p,i)=>{Se(p,()=>({id:`related-nav-${e(B).id}`,class:"gem-c-related-navigation__main-heading"}),void 0,"svelte-1eujhij");var r=de();y(()=>H(r,e(B).title)),_(i,r)}),_(a,t)};E(ie,a=>{e(B)&&e(B).title&&a(_e)})}var ce=K(ie,2);ee(ce,19,u,a=>a.id,(a,t,s)=>{var p=V();const i=o(()=>e(t).links??[]),r=o(()=>e(t).truncateThreshold??ve()),j=o(()=>!e(t).disableTruncation&&e(i).length>e(r)),w=o(()=>e(t).type==="main"||e(t).type==="other"?"other":"normal"),c=o(()=>(e(t).linkStyle??e(w))==="other"),d=o(()=>{var h;return e(t).subheading??((h=e(B))==null?void 0:h.title)??"Related content"});var v=A(p);{var J=h=>{var l=Re(),b=k(l);{var C=f=>{Le(f,()=>`related-nav-heading-${e(t).id}`,()=>e(t).subheading??"",()=>e(t).type==="other")};E(b,f=>{(e(t).type==="subheading"||e(t).type==="other")&&f(C)})}var T=K(b,2),N=k(T);ee(N,17,()=>e(i).slice(0,e(j)?e(r):e(i).length),je,(f,D,G)=>{F(f,()=>e(D),()=>G,()=>e(i).length,()=>e(d),()=>e(c),()=>e(s))});var U=K(N,2);{var R=f=>{var D=Ne(),G=A(D);z(G,()=>e(i),()=>e(t).id,()=>e(r));var I=K(G,2);P(I,()=>e(i),()=>e(t).id,()=>e(d),()=>e(c),()=>e(r),()=>e(s)),_(f,D)};E(U,f=>{e(j)&&e(Z)&&f(R)})}m(T),m(l),y(()=>{n(l,"aria-labelledby",e(t).type!=="main"?`related-nav-heading-${e(t).id}`:void 0),n(l,"data-module",e(j)?"gem-toggle":void 0)}),_(h,l)};E(v,h=>{e(i).length>0&&h(J)})}_(a,p)}),m(Q),y(()=>M(Q,1,`gem-c-related-navigation govuk-!-display-none-print ${e(Z)?"govuk-frontend-supported":""}`,"svelte-1eujhij")),_(q,Q),ke()}xe(["click"]);export{Pe as R};
